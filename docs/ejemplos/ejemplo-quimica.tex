% =============================================================================
% Ejemplo autocontenido de componentes de Qu√≠mica/Materiales
% Compilar con: lualatex -shell-escape ejemplo-quimica.tex
% =============================================================================
\documentclass[12pt,a4paper]{article}

% Configuraci√≥n b√°sica
\usepackage[spanish]{babel}
\usepackage{fontspec}
\usepackage{xcolor}
\usepackage{tcolorbox}
\tcbuselibrary{skins,breakable}
\usepackage{booktabs}
\usepackage{siunitx}
\usepackage{chemfig}
\usepackage{chemmacros}
\usepackage{tikz}
\usetikzlibrary{positioning,shapes}

% Definici√≥n de colores de la paleta
\definecolor{eps-primary}{HTML}{2563EB}
\definecolor{eps-secondary}{HTML}{7C3AED}
\definecolor{eps-success}{HTML}{059669}
\definecolor{eps-warning}{HTML}{D97706}
\definecolor{eps-danger}{HTML}{DC2626}
\definecolor{eps-info}{HTML}{0284C7}
\definecolor{eps-dark}{HTML}{1F2937}
\definecolor{eps-gray}{HTML}{6B7280}
\definecolor{eps-light}{HTML}{F3F4F6}

% Colores espec√≠ficos de qu√≠mica
\definecolor{organic-color}{HTML}{059669}
\definecolor{inorganic-color}{HTML}{2563EB}
\definecolor{hazard-color}{HTML}{DC2626}
\definecolor{reagent-color}{HTML}{7C3AED}

% --- COMPONENTES DE QU√çMICA ---

% Ficha de compuesto
\newtcolorbox{compoundcard}[2][]{%
  colback=white,
  colframe=#2,
  title={\textbf{Ficha de compuesto}},
  fonttitle=\small\sffamily,
  boxrule=0.5pt,
  #1
}

% Badge de compuesto
\newcommand{\compoundbadge}[2]{%
  \tikz[baseline=(text.base)]{%
    \node[fill=#2!15,draw=#2,rounded corners=2pt,inner sep=3pt,font=\sffamily\footnotesize\bfseries,text=#2] (text) {#1};
  }%
}

\newcommand{\organicbadge}{\compoundbadge{Org√°nico}{organic-color}}
\newcommand{\inorganicbadge}{\compoundbadge{Inorg√°nico}{inorganic-color}}
\newcommand{\polymerbadge}{\compoundbadge{Pol√≠mero}{eps-secondary}}
\newcommand{\catalystbadge}{\compoundbadge{Catalizador}{reagent-color}}

% Propiedades f√≠sico-qu√≠micas
\newenvironment{chemprops}[1][Propiedades f√≠sico-qu√≠micas]{%
  \begin{tcolorbox}[
    colback=eps-light,
    colframe=eps-dark,
    title={\textbf{#1}},
    fonttitle=\small\sffamily,
    boxrule=0.5pt
  ]
  \small
  \begin{tabular}{@{}ll@{}}
}{%
  \end{tabular}
  \end{tcolorbox}
}

% Caja de reacci√≥n qu√≠mica
\newtcolorbox{reactionbox}[1][]{%
  colback=organic-color!5,
  colframe=organic-color,
  title={\textbf{Reacci√≥n qu√≠mica}},
  fonttitle=\small\sffamily,
  boxrule=0.5pt,
  #1
}

% Caja de seguridad
\newtcolorbox{hazardbox}[1][]{%
  colback=hazard-color!5,
  colframe=hazard-color,
  title={\textbf{‚ö† Informaci√≥n de seguridad}},
  fonttitle=\small\sffamily,
  boxrule=0.5pt,
  #1
}

% Indicadores de peligro GHS
\newcommand{\ghsflammable}{\tikz[baseline=-0.5ex]{\node[fill=white,draw=hazard-color,diamond,minimum size=1.2em,inner sep=0,font=\tiny\bfseries,text=hazard-color] {üî•};}}
\newcommand{\ghstoxic}{\tikz[baseline=-0.5ex]{\node[fill=white,draw=hazard-color,diamond,minimum size=1.2em,inner sep=0,font=\tiny\bfseries,text=hazard-color] {‚ò†};}}
\newcommand{\ghscorrosive}{\tikz[baseline=-0.5ex]{\node[fill=white,draw=hazard-color,diamond,minimum size=1.2em,inner sep=0,font=\tiny\bfseries,text=hazard-color] {‚öó};}}
\newcommand{\ghsoxidizer}{\tikz[baseline=-0.5ex]{\node[fill=white,draw=hazard-color,diamond,minimum size=1.2em,inner sep=0,font=\tiny\bfseries,text=hazard-color] {‚äô};}}
\newcommand{\ghsirritant}{\tikz[baseline=-0.5ex]{\node[fill=white,draw=hazard-color,diamond,minimum size=1.2em,inner sep=0,font=\tiny\bfseries,text=hazard-color] {!};}}

% Frases H y P
\newcommand{\hphrase}[1]{\textcolor{hazard-color}{\textbf{H#1}}}
\newcommand{\pphrase}[1]{\textcolor{eps-info}{\textbf{P#1}}}

% Tabla de reactivos
\newenvironment{reagenttable}[1][Reactivos]{%
  \begin{tcolorbox}[
    colback=white,
    colframe=reagent-color,
    title={\textbf{#1}},
    fonttitle=\small\sffamily,
    boxrule=0.5pt
  ]
  \small\centering
  \begin{tabular}{@{}lcccc@{}}
    \toprule
    \textbf{Reactivo} & \textbf{M (g/mol)} & \textbf{Pureza} & \textbf{Cantidad} & \textbf{Moles} \\
    \midrule
}{%
    \bottomrule
  \end{tabular}
  \end{tcolorbox}
}

% Caja de procedimiento
\newtcolorbox{procedurebox}[1][]{%
  colback=eps-info!5,
  colframe=eps-info,
  title={\textbf{Procedimiento experimental}},
  fonttitle=\small\sffamily,
  boxrule=0.5pt,
  #1
}

% Indicador de pH
\newcommand{\pHindicator}[1]{%
  \tikz[baseline=-0.5ex]{%
    \pgfmathsetmacro{\pHcolor}{%
      #1 < 3 ? "red" : 
      (#1 < 6 ? "orange" : 
      (#1 < 8 ? "green!70!black" : 
      (#1 < 11 ? "blue" : "purple")))
    }%
    \node[fill=\pHcolor!20,draw=\pHcolor,rounded corners=2pt,inner sep=2pt,font=\sffamily\small\bfseries] {pH #1};
  }%
}

% Indicador de rendimiento
\newcommand{\yieldbox}[1]{%
  \begin{tcolorbox}[
    colback=eps-success!10,
    colframe=eps-success,
    width=3cm,
    boxrule=0.5pt,
    left=2pt,right=2pt,top=2pt,bottom=2pt
  ]
    \centering\small\sffamily
    \textbf{Rendimiento}\\
    #1\%
  \end{tcolorbox}%
}

% Caja de espectroscop√≠a
\newtcolorbox{spectrobox}[2][]{%
  colback=white,
  colframe=eps-secondary,
  title={\textbf{Espectroscop√≠a #2}},
  fonttitle=\small\sffamily,
  boxrule=0.5pt,
  #1
}

% Tabla de datos espectrosc√≥picos
\newenvironment{spectrotable}[1][Se√±ales]{%
  \small\centering
  \begin{tabular}{@{}ccc@{}}
    \toprule
    \textbf{Se√±al} & \textbf{Valor} & \textbf{Asignaci√≥n} \\
    \midrule
}{%
    \bottomrule
  \end{tabular}
}

% Estado de la materia
\newcommand{\statesolid}{\tikz[baseline=-0.5ex]{\node[fill=eps-gray!30,rounded corners=1pt,inner sep=2pt,font=\tiny\sffamily] {(s)};}}
\newcommand{\stateliquid}{\tikz[baseline=-0.5ex]{\node[fill=eps-info!30,rounded corners=1pt,inner sep=2pt,font=\tiny\sffamily] {(l)};}}
\newcommand{\stategas}{\tikz[baseline=-0.5ex]{\node[fill=eps-light,rounded corners=1pt,inner sep=2pt,font=\tiny\sffamily] {(g)};}}
\newcommand{\stateaq}{\tikz[baseline=-0.5ex]{\node[fill=eps-primary!20,rounded corners=1pt,inner sep=2pt,font=\tiny\sffamily] {(aq)};}}

\begin{document}

\title{\bfseries Componentes de Qu√≠mica\\[0.3em]\large Ejemplos de uso}
\author{eps-quimica.sty}
\date{\today}
\maketitle

\section{Badges de compuestos}

Tipos de compuestos:

\begin{center}
\organicbadge \quad \inorganicbadge \quad \polymerbadge \quad \catalystbadge
\end{center}

\section{Ficha de compuesto}

\begin{compoundcard}{organic-color}
  \textbf{√Åcido acetilsalic√≠lico (Aspirina)}
  
  F√≥rmula molecular: \ch{C9H8O4}
  
  \begin{center}
  \chemfig{*6(=-=(-O-[::-60](=[::-60]O)-[::60]CH_3)-(-(=[::-60]O)-[::60]OH)=-)}
  \end{center}
  
  \begin{tabular}{@{}ll@{}}
    Masa molar: & \SI{180.16}{\gram\per\mole} \\
    Punto de fusi√≥n: & \SI{135}{\degreeCelsius} \\
    Solubilidad: & Poco soluble en agua \\
  \end{tabular}
\end{compoundcard}

\section{Propiedades f√≠sico-qu√≠micas}

\begin{chemprops}[Propiedades del etanol]
  F√≥rmula: & \ch{C2H5OH} \\
  Masa molar: & \SI{46.07}{\gram\per\mole} \\
  Densidad: & \SI{0.789}{\gram\per\milli\liter} \\
  Punto de ebullici√≥n: & \SI{78.37}{\degreeCelsius} \\
  Punto de fusi√≥n: & \SI{-114.1}{\degreeCelsius} \\
  √çndice de refracci√≥n: & 1.361 \\
  Momento dipolar: & \SI{1.69}{\debye} \\
\end{chemprops}

\section{Reacci√≥n qu√≠mica}

\begin{reactionbox}
  \textbf{S√≠ntesis de Fischer de √©steres:}
  
  \begin{center}
  \ch{R-COOH + R'-OH <=>[\text{H}^+][\Delta] R-COOR' + H2O}
  \end{center}
  
  Condiciones: cat√°lisis √°cida, reflujo, exceso de alcohol.
\end{reactionbox}

\section{Estados de la materia}

\ch{NaCl} \statesolid + \ch{H2O} \stateliquid ‚Üí \ch{Na+} \stateaq + \ch{Cl-} \stateaq

\ch{CaCO3} \statesolid ‚Üí \ch{CaO} \statesolid + \ch{CO2} \stategas

\section{Informaci√≥n de seguridad}

\begin{hazardbox}
  \textbf{√Åcido clorh√≠drico concentrado}
  
  Pictogramas: \ghscorrosive
  
  Indicaciones de peligro:
  \begin{itemize}
    \item \hphrase{290}: Puede ser corrosivo para los metales
    \item \hphrase{314}: Provoca quemaduras graves en la piel
    \item \hphrase{335}: Puede irritar las v√≠as respiratorias
  \end{itemize}
  
  Consejos de prudencia:
  \begin{itemize}
    \item \pphrase{260}: No respirar los vapores
    \item \pphrase{280}: Usar guantes y protecci√≥n ocular
    \item \pphrase{310}: Llamar inmediatamente a un centro de toxicolog√≠a
  \end{itemize}
\end{hazardbox}

\section{Pictogramas GHS}

\begin{center}
\ghsflammable \quad \ghstoxic \quad \ghscorrosive \quad \ghsoxidizer \quad \ghsirritant
\end{center}

\section{Indicador de pH}

Escala de pH:

\begin{center}
\pHindicator{1} \quad
\pHindicator{4} \quad
\pHindicator{7} \quad
\pHindicator{10} \quad
\pHindicator{14}
\end{center}

\section{Tabla de reactivos}

\begin{reagenttable}[Reactivos para s√≠ntesis de aspirina]
  √Åcido salic√≠lico & 138.12 & 99\% & \SI{2.0}{\gram} & 0.0145 \\
  Anh√≠drido ac√©tico & 102.09 & 98\% & \SI{3.0}{\milli\liter} & 0.0310 \\
  √Åcido fosf√≥rico & 98.00 & 85\% & 5 gotas & cat. \\
\end{reagenttable}

\section{Procedimiento experimental}

\begin{procedurebox}
  \begin{enumerate}
    \item Pesar \SI{2.0}{\gram} de √°cido salic√≠lico en un matraz Erlenmeyer.
    \item A√±adir \SI{3.0}{\milli\liter} de anh√≠drido ac√©tico.
    \item Agregar 5 gotas de √°cido fosf√≥rico como catalizador.
    \item Calentar en ba√±o mar√≠a a \SI{85}{\degreeCelsius} durante 15 minutos.
    \item Enfriar y a√±adir \SI{20}{\milli\liter} de agua fr√≠a.
    \item Filtrar los cristales y lavar con agua fr√≠a.
    \item Recristalizar en etanol/agua.
  \end{enumerate}
\end{procedurebox}

\section{Rendimiento}

\begin{center}
\yieldbox{78}
\end{center}

\section{Datos espectrosc√≥picos}

\begin{spectrobox}{IR}
  \begin{spectrotable}
    \SI{3300}{\per\centi\meter} & ancha & O-H √°cido \\
    \SI{1750}{\per\centi\meter} & fuerte & C=O √©ster \\
    \SI{1690}{\per\centi\meter} & fuerte & C=O √°cido \\
    \SI{1220}{\per\centi\meter} & media & C-O √©ster \\
  \end{spectrotable}
\end{spectrobox}

\begin{spectrobox}{RMN \textsuperscript{1}H}
  \begin{spectrotable}
    2.36 ppm & s, 3H & CH$_3$ \\
    7.15 ppm & d, 1H & H arom√°tico \\
    7.35 ppm & t, 1H & H arom√°tico \\
    7.60 ppm & t, 1H & H arom√°tico \\
    8.10 ppm & d, 1H & H arom√°tico \\
  \end{spectrotable}
\end{spectrobox}

\section{Estructura con chemfig}

\begin{center}
\textbf{Glucosa (forma abierta):}

\chemfig{
  CHO-[2](-[3]OH)-[6](-[5]H)(-[7]OH)-[2](-[3]H)(-[1]OH)-[6](-[5]OH)(-[7]H)-[2]CH_2OH
}

\vspace{1em}

\textbf{Benceno:}
\chemfig{**6(------)}

\vspace{1em}

\textbf{Adenina:}
\chemfig{*6(-N=*5(-N=-NH-)-=-N=-)}
\end{center}

\end{document}
